<head>
	<link rel="stylesheet" href="static/main.css">
</head>
{%extends "base.html" %}

{% block content %}

<h3 class="title">Nouvel article</h3>


<form method="POST" enctype="multipart/form-data" action="/admin_pagetest">

    <p><input class="input is-large" type="text" name="titre" placeholder="titre"> </p>

    <p> <input class="input is-large" type="file" name="image"> </p>


    <p><input class="input is-large" type="text" name="description" placeholder="description"> </p>

    <p><input class="input is-large" type="text" name="composition" placeholder="composition"> </p>

    <p><input class="input is-large" type="text" name="prix" placeholder="prix"> </p>

    <p><input class="input is-large" type="text" name="couleur" placeholder="couleur"> </p>

    <p><input class="input is-large" type="text" name="poids" placeholder="poids"> </p>

    <div id="images-container">
        <label for="image1">Image 1 :</label>
        <input type="file" name="image1" id="image1" accept="image/*" required>
        <br>
    </div>
    
      <!-- Bouton pour ajouter de nouveaux champs d'image -->
      <button type="button" onclick="ajouterChampImage()">Ajouter une image</button>

    <p> <input type = "submit" value="Valider"/> </p>
</form>
<script>
    function ajouterChampImage() {
      // Comptez le nombre de champs d'image existants
      const imagesContainer = document.getElementById('images-container');
      const existingImageFields = imagesContainer.getElementsByTagName('input').length;
  
      // Créez un nouvel élément de champ d'image
      const newImageField = document.createElement('div');
      newImageField.innerHTML = `
        <label for="image${existingImageFields + 1}">Image ${existingImageFields + 1} :</label>
        <input type="file" name="image${existingImageFields + 1}" id="image${existingImageFields + 1}" accept="image/*" required>
        <br>
      `;
  
      // Ajoutez le nouveau champ d'image au conteneur
      imagesContainer.appendChild(newImageField);
    }
  </script>
    {% with messages = get_flashed_messages(with_categories=true,
         category_filter=["error","info"]) %}

        {%if messages %}
            {% for category, message in messages %}
                <p>{{message}}</p>
            {% endfor %}

        {%endif %}

    {% endwith %}

{%endblock content %}